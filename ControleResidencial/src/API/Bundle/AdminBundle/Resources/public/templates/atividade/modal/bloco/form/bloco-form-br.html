gnoreChanges=!1},function(i){return n.ignoreChanges=!1,t.Promise.wrapError(i)})},fromKey:function(n){for(var i,t=0,r=this.groups.length;t<r;t++)if(i=this.groups[t],i.key===n)return{group:i,index:t};return null},fromHandle:function(n){for(var i,t=0,r=this.groups.length;t<r;t++)if(i=this.groups[t],i.handle===n)return{group:i,index:t};return null}})}),_UnvirtualizedGroupsContainer:t.Namespace._lazy(function(){return t.Class.derive(t.UI._GroupsContainerBase,function(n,i){this._listView=n;this.groupDataSource=i;this.groups=[];this.pendingChanges=[];this.dirty=!0;var r=this,u={beginNotifications:function(){r._listView._versionManager.beginNotifications()},endNotifications:function(){(r._listView._versionManager.endNotifications(),r._listView._ifZombieDispose())||!r.ignoreChanges&&r._listView._groupsChanged&&r._listView._scheduleUpdate()},indexChanged:function(){(r._listView._versionManager.receivedNotification(),r._listView._ifZombieDispose())||this.scheduleUpdate()},itemAvailable:function(){},countChanged:function(n){(r._listView._versionManager.receivedNotification(),r._listView._writeProfilerMark("groupCountChanged("+n+"),info"),r._listView._ifZombieDispose())||this.scheduleUpdate()},changed:function(n){if(r._listView._versionManager.receivedNotification(),!r._listView._ifZombieDispose()){var t=r.fromKey(n.key);t&&(r._listView._writeProfilerMark("groupChanged("+t.index+"),info"),t.group.userData=n,t.group.startIndex=n.firstItemIndexHint,this.markToRemove(t.group));this.scheduleUpdate()}},removed:function(n){var t,i;(r._listView._versionManager.receivedNotification(),r._listView._groupRemoved(n),r._listView._ifZombieDispose())||(t=r.fromHandle(n),t&&(r._listView._writeProfilerMark("groupRemoved("+t.index+"),info"),r.groups.splice(t.index,1),i=r.groups.indexOf(t.group,t.index),i>-1&&r.groups.splice(i,1),this.markToRemove(t.group)),this.scheduleUpdate())},inserted:function(n,t,i){if(r._listView._versionManager.receivedNotification(),!r._listView._ifZombieDispose()){r._listView._writeProfilerMark("groupInserted,info");var u=this;n.retain().then(function(f){var e,o;e=t||i||r.groups.length?u.findIndex(t,i):0;e!==-1&&(o={key:f.key,startIndex:f.firstItemIndexHint,userData:f,handle:n.handle},r.groups.splice(e,0,o));u.scheduleUpdate()});r.pendingChanges.push(n)}},moved:function(n,t,i){if(r._listView._versionManager.receivedNotification(),!r._listView._ifZombieDispose()){r._listView._writeProfilerMark("groupMoved,info");var u=this;n.then(function(f){var o=u.findIndex(t,i),e=r.fromKey(f.key),s;e?(r.groups.splice(e.index,1),o!==-1&&(e.index<o&&o--,e.group.key=f.key,e.group.userData=f,e.group.startIndex=f.firstItemIndexHint,r.groups.splice(o,0,e.group))):o!==-1&&(s={key:f.key,startIndex:f.firstItemIndexHint,userData:f,handle:n.handle},r.groups.splice(o,0,s),n.retain());u.scheduleUpdate()});r.pendingChanges.push(n)}},reload:function(){(r._listView._versionManager.receivedNotification(),r._listView._ifZombieDispose())||r._listView._processReload()},markToRemove:function(n){if(n.header){var t=n.header;n.header=null;n.left=-1;n.width=-1;n.decorator=null;n.tabIndex=-1;t.tabIndex=-1;r._listView._groupsToRemove[t.uniqueID]={group:n,header:t}}},scheduleUpdate:function(){r.dirty=!0;r.ignoreChanges||(r._listView._groupsChanged=!0)},findIndex:function(n,t){var u=-1,i;return n&&(i=r.fromHandle(n),i&&(u=i.index+1)),u===-1&&t&&(i=r.fromHandle(t),i&&(u=i.index)),u},removeElements:function(n){if(n.header){var i=n.header.parentNode;i&&(t.Utilities.disposeSubTree(n.header),i.removeChild(n.header));n.header=null;n.left=-1;n.width=-1}}};this.listBinding=this.groupDataSource.createListBinding(u)},{initialize:function(){this.initializePromise&&this.initializePromise.cancel();this._listView._writeProfilerMark("GroupsContainer_initialize,StartTM");var n=this;return this.initializePromise=this.groupDataSource.getCount().then(function(t){for(var u=[],r=0;r<t;r++)u.push(n.listBinding.fromIndex(r).retain());return i.join(u)}).then(function(t){var r,u,i;for(n.groups=[],r=0,u=t.length;r<u;r++)i=t[r],n.groups.push({key:i.key,startIndex:i.firstItemIndexHint,handle:i.handle,userData:i});n._listView._writeProfilerMark("GroupsContainer_initialize groups("+t.length+"),info");n._listView._writeProfilerMark("GroupsContainer_initialize,StopTM")},function(i){return n._listView._writeProfilerMark("GroupsContainer_initialize,StopTM"),t.Promise.wrapError(i)}),this.initializePromise},renderGroup:function(n){if(this._listView.groupHeaderTemplate){var r=this.groups[n];return i.wrap(this._listVi